

<!DOCTYPE html>
<html class="writer-html5" lang="en-US" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Privacy levels" />
<meta property="og:type" content="website" />
<meta property="og:url" content="design/privacy-levels.html" />
<meta property="og:site_name" content="Read the Docs Documentation" />
<meta property="og:description" content="This document describes how to handle and unify privacy levels on the community and commercial version of Read the Docs. Current state: Currently, we have three privacy levels for projects and versions: Public, Private, Protected (currently hidden). These levels of privacy aren’t clear and bring ..." />
<meta property="og:image" content="https://docs.readthedocs.io/en/latest/_static/img/logo-opengraph.png" />
<meta property="og:image:alt" content="Read the Docs Documentation" />
<meta name="description" content="This document describes how to handle and unify privacy levels on the community and commercial version of Read the Docs. Current state: Currently, we have three privacy levels for projects and versions: Public, Private, Protected (currently hidden). These levels of privacy aren’t clear and bring ..." />
<meta name="twitter:card" content="summary_large_image" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Privacy levels &mdash; Read the Docs developer documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=ca6f9a36" />
      <link rel="stylesheet" type="text/css" href="../_static/css/sphinx_prompt_css.css?v=351d85e3" />

  
    <link rel="canonical" href="https://projects.localizethedocs.org/rtd-dev-docs-l10n/design/privacy-levels.html" />
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=cc8e41f0"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=f281be69"></script>
      <script src="../_static/design-tabs.js?v=f930bc37"></script>
      <script src="../_static/js/expand_tabs.js?v=1e151f68"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Improving redirects" href="redirects.html" />
    <link rel="prev" title="Design of pull request builder" href="pr-builder.html" />

   

  

<script type="text/javascript" src="../ltd-provenance.js"></script>
<script type="text/javascript" src="../ltd-current.js"></script>
<script type="text/javascript" src="../../../ltd-config.js"></script>
<script type="text/javascript" src="../../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
              <img src="../_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">General</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contributing to Read the Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code-of-conduct.html">Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../issue-labels.html">Overview of issue labels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Design documents</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="apiv3.html">API v3 design document</a></li>
<li class="toctree-l2"><a class="reference internal" href="better-doc-urls-handling.html">Better handling of docs URLs</a></li>
<li class="toctree-l2"><a class="reference internal" href="build-images.html">Build images</a></li>
<li class="toctree-l2"><a class="reference internal" href="embed-api.html">Embed APIv3</a></li>
<li class="toctree-l2"><a class="reference internal" href="file-tree-diff.html">Version file tree diff</a></li>
<li class="toctree-l2"><a class="reference internal" href="flyout-redesign.html">Flyout Redesign Design Document</a></li>
<li class="toctree-l2"><a class="reference internal" href="future-builder.html">Future builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="in-doc-search-ui.html">In-doc search UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="new-notifications-system.html">Notification system: a new approach after lot of discussions</a></li>
<li class="toctree-l2"><a class="reference internal" href="new-search-api.html">New search API</a></li>
<li class="toctree-l2"><a class="reference internal" href="new-sphinx-guides.html">Proposed contents for new Sphinx guides</a></li>
<li class="toctree-l2"><a class="reference internal" href="organizations.html">Organizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="pr-builder.html">Design of pull request builder</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Privacy levels</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#current-state">Current state</a></li>
<li class="toctree-l3"><a class="reference internal" href="#project-level-privacy">Project level privacy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#version-level-privacy">Version level privacy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#footer">Footer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#migration">Migration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#upgrade-path-overview">Upgrade path overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#community-site">Community site</a></li>
<li class="toctree-l4"><a class="reference internal" href="#commercial-site">Commercial site</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="redirects.html">Improving redirects</a></li>
<li class="toctree-l2"><a class="reference internal" href="refactor-remote-repository.html">Refactor <code class="docutils literal notranslate"><span class="pre">RemoteRepository</span></code> object</a></li>
<li class="toctree-l2"><a class="reference internal" href="secure-api-access-from-builders.html">Secure API access from builders</a></li>
<li class="toctree-l2"><a class="reference internal" href="sphinx-jquery.html">sphinxcontrib-jquery</a></li>
<li class="toctree-l2"><a class="reference internal" href="system-packages.html">Allow installation of system packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="telemetry.html">Collect data about builds</a></li>
<li class="toctree-l2"><a class="reference internal" href="theme-context.html">Read the Docs data passed to Sphinx build context</a></li>
<li class="toctree-l2"><a class="reference internal" href="yaml-file.html">YAML configuration file</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install.html">Development installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">Development guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Designing Read the Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs.html">Building and contributing to documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../style-guide.html">Documentation style guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../front-end.html">Front-end development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../i18n.html">Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../migrations.html">Database migrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../server-side-search.html">Server side search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../search-integration.html">Server side search integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aws-temporary-credentials.html">AWS temporary credentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subscriptions.html">Subscriptions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../github-app.html">GitHub App</a></li>
<li class="toctree-l1"><a class="reference internal" href="../settings.html">Interesting settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tests.html">Testing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Read the Docs developer documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Design documents</a></li>
      <li class="breadcrumb-item active">Privacy levels</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/readthedocs/readthedocs.org/blob/main/docs/dev/design/privacy-levels.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="privacy-levels">
<h1>Privacy levels<a class="headerlink" href="#privacy-levels" title="Link to this heading"></a></h1>
<p>This document describes how to handle and unify privacy levels
on the community and commercial version of Read the Docs.</p>
<section id="current-state">
<h2>Current state<a class="headerlink" href="#current-state" title="Link to this heading"></a></h2>
<p>Currently, we have three privacy levels for projects and versions:</p>
<ol class="arabic simple">
<li><p>Public</p></li>
<li><p>Private</p></li>
<li><p>Protected (currently hidden)</p></li>
</ol>
<p>These levels of privacy aren’t clear and bring confusion to our users.
Also, the private level doesn’t makes sense on the community site,
since we only support public projects.</p>
<p>Places where we use the privacy levels are:</p>
<ul class="simple">
<li><p>On serving docs</p></li>
<li><p>Footer</p></li>
<li><p>Dashboard</p></li>
</ul>
</section>
<section id="project-level-privacy">
<h2>Project level privacy<a class="headerlink" href="#project-level-privacy" title="Link to this heading"></a></h2>
<p>Project level privacy was meant to control the dashboard visibility.</p>
<p>This privacy level brings to confusion when users want to make a version public.
We should remove all the project privacy levels.</p>
<p>For the community site the dashboard would be always visible,
and for the commercial site, the dashboard would be always hidden.</p>
<p>The project privacy level is also used to serve the <code class="docutils literal notranslate"><span class="pre">404.html</span></code> page,
show <code class="docutils literal notranslate"><span class="pre">robots.txt</span></code>, and show  <code class="docutils literal notranslate"><span class="pre">sitemap.xml</span></code>.
The privacy level from versions should be used instead.</p>
<p>Some other ideas about keeping the privacy level is to dictate the default version level of new versions,
but removing all other logic related to this privacy level.
This can be (or is going to be) possible with automation rules,
so we can just remove the field.</p>
</section>
<section id="version-level-privacy">
<h2>Version level privacy<a class="headerlink" href="#version-level-privacy" title="Link to this heading"></a></h2>
<p>Version level privacy is mainly used to restrict access to documentation.
For public level, everyone can access to the documentation.
For private level, only users that are maintainers or that belong to a team with access
(for the commercial site)
can access to the documentation.</p>
<p>The protected privacy level was meant to hide versions from listings and search.
For the community site these versions are treated like public versions,
and on the commercial site they are treated like private.</p>
<p>The protected privacy level is currently hidden.
To keep the behavior of hiding versions from listings and search,
a new field should be added to the Version model and forms: <code class="docutils literal notranslate"><span class="pre">hidden</span></code> (<a class="reference external" href="https://github.com/readthedocs/readthedocs.org/issues/5321">#5321</a>).
The privacy level (public or private) would be respected to determine access to the documentation.</p>
<p>For the community site, the privacy level would be public and can’t be changed.</p>
<p>The default privacy level of new versions for the commercial site would be <code class="docutils literal notranslate"><span class="pre">private</span></code>
(this is the <code class="docutils literal notranslate"><span class="pre">DEFAULT_PRIVACY_LEVEL</span></code> setting).</p>
</section>
<section id="footer">
<h2>Footer<a class="headerlink" href="#footer" title="Link to this heading"></a></h2>
<p>The footer is used to display not hidden versions that the current user has access to.</p>
<p>For the community site no changes are required on the footer.</p>
<p>For the commercial site we use the project level privacy to decide if show or not
links to the project’s dashboard: downloads, project home, and builds.
Given that the project privacy level would be removed (and the dashboard is always under login),
those links would never be shown, except for admin users (owners or from a team with admin access)
since they are the only ones allowed to make changes on the project.</p>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>For the community site:</p>
<ul class="simple">
<li><p>The project’s dashboard is visible to all users.</p></li>
<li><p>All versions are always public.</p></li>
<li><p>The footer shows links to the project’s dashboard (build, downloads, home) to all users.</p></li>
<li><p>Only versions with <code class="docutils literal notranslate"><span class="pre">hidden</span> <span class="pre">=</span> <span class="pre">False</span></code> are listed on the footer and appear on search results.</p></li>
<li><p>If a project has a <code class="xref py py-obj docutils literal notranslate"><span class="pre">404.html</span></code> file on the default version, it’s served.</p></li>
<li><p>If a project has a <code class="docutils literal notranslate"><span class="pre">robots.txt</span></code> file on the default version, it’s served.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">sitemap.xml</span></code> file is always served.</p></li>
</ul>
<p>For the commercial site:</p>
<ul class="simple">
<li><p>The project’s dashboard is visible to only users that have read permission over the project.</p></li>
<li><p>The footer shows links to the project’s dashboard (build, downloads, home) to only admin users.</p></li>
<li><p>Only versions with <code class="docutils literal notranslate"><span class="pre">hidden</span> <span class="pre">=</span> <span class="pre">False</span></code> are listed on the footer and appear on search results.</p></li>
<li><p>If a project has a <code class="docutils literal notranslate"><span class="pre">404.html</span></code> file on the default version, it’s served if the user has permission over that version.</p></li>
<li><p>If a project has a <code class="docutils literal notranslate"><span class="pre">robots.txt</span></code> file on the default version, it’s served if the user has permission over that version.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">sitemap.xml</span></code> file is served if the user has at least one public version.
And it will only list public versions.</p></li>
</ul>
</section>
<section id="migration">
<h2>Migration<a class="headerlink" href="#migration" title="Link to this heading"></a></h2>
<p>To differentiate between allowing or not privacy levels,
we need to add a setting <code class="docutils literal notranslate"><span class="pre">RTD_ALLOW_PRIVACY_LEVELS</span></code> (<code class="docutils literal notranslate"><span class="pre">False</span></code> by default).</p>
<p>For the community and commercial site, we need to:</p>
<ul class="simple">
<li><p>Remove/change code that depends on the project’s privacy level.
Use the global setting <code class="docutils literal notranslate"><span class="pre">RTD_ALLOW_PRIVACY_LEVELS</span></code> and default version’s privacy level instead.</p>
<ul>
<li><p>Display robots.txt</p></li>
<li><p>Serve 404.html page</p></li>
<li><p>Display sitemap.xml</p></li>
<li><p>Querysets</p></li>
</ul>
</li>
<li><p>Remove <code class="xref py py-obj docutils literal notranslate"><span class="pre">Project.privacy_level</span></code> field</p></li>
<li><p>Migrate all protected versions to have the attribute <code class="docutils literal notranslate"><span class="pre">hidden</span> <span class="pre">=</span> <span class="pre">True</span></code> (data migration),
and set their privacy level to public for the community site and private for the commercial site.</p></li>
<li><p>Change all querysets used to list versions on the footer and on search to use the <code class="docutils literal notranslate"><span class="pre">hidden</span></code> attribute.</p></li>
<li><p>Update docs</p></li>
</ul>
<p>For the community site:</p>
<ul class="simple">
<li><p>Hide all privacy level related settings from the version form.</p></li>
<li><p>Don’t expose privacy levels on API v3.</p></li>
<li><p>Mark all versions as public.</p></li>
</ul>
<p>For the commercial site:</p>
<ul class="simple">
<li><p>Always hide the dashboard</p></li>
<li><p>Show links to the dashboard (downloads, builds, project home) on the footer only to admin users.</p></li>
</ul>
</section>
<section id="upgrade-path-overview">
<h2>Upgrade path overview<a class="headerlink" href="#upgrade-path-overview" title="Link to this heading"></a></h2>
<section id="community-site">
<h3>Community site<a class="headerlink" href="#community-site" title="Link to this heading"></a></h3>
<p>The default privacy level for the community site is public for versions and the dashboard is always public.</p>
<section id="public-project-community">
<h4>Public project (community)<a class="headerlink" href="#public-project-community" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>Public version:
Normal use case, no changes required.</p></li>
<li><p>Protected version:
Users didn’t want to list this version on the footer,
but also not deactivate it.
We can do a data migration of those versions to the new <code class="docutils literal notranslate"><span class="pre">hidden</span></code> setting and make them public.</p></li>
<li><p>Private version:
Users didn’t want to show this version to their users yet or they were testing something.
This can be solved with the pull request builder feature and the <code class="docutils literal notranslate"><span class="pre">hidden</span></code> setting.
We migrate those to public with the <code class="docutils literal notranslate"><span class="pre">hidden</span></code> setting.
If we are worried about leaking anything from the version, we can email users before doing the change.</p></li>
</ul>
</section>
<section id="protected-project-community">
<h4>Protected project (community)<a class="headerlink" href="#protected-project-community" title="Link to this heading"></a></h4>
<p>Protected projects are not listed publicly.
Probably users were hosting a WIP project,
or personal public project.
A public project should work for them,
as we are removing listing all projects publicly (except for search).</p>
<p>The migration path for versions of protected projects is the same as a public project.</p>
</section>
<section id="private-project-community">
<h4>Private project (community)<a class="headerlink" href="#private-project-community" title="Link to this heading"></a></h4>
<p>Probably these users want to use our enterprise solution instead.
Or they were hosting a personal project.</p>
<p>The migration path for versions of private projects is the same as a public project.</p>
<p>If we are worried about leaking anything from the dashboard or build page,
we can email users before doing the change.</p>
</section>
</section>
<section id="commercial-site">
<h3>Commercial site<a class="headerlink" href="#commercial-site" title="Link to this heading"></a></h3>
<p>The default privacy level for the commercial site is private for versions and the dashboard is show only to admin users.</p>
<section id="private-project-commercial">
<h4>Private project (commercial)<a class="headerlink" href="#private-project-commercial" title="Link to this heading"></a></h4>
<ul class="simple">
<li><p>Private version:
Normal usa case, not changes required.</p></li>
<li><p>Protected version:
Users didn’t want to list this version on the footer,
but also not deactivate it. This can be solved by using the new <code class="docutils literal notranslate"><span class="pre">hidden</span></code> setting.
We can do a data migration of those versions to the new <code class="docutils literal notranslate"><span class="pre">hidden</span></code> setting and make them private.</p></li>
<li><p>Public version:
User has private code, but want to make public their docs.
No changes required.</p></li>
</ul>
</section>
<section id="protected-project-commercial">
<h4>Protected project (commercial)<a class="headerlink" href="#protected-project-commercial" title="Link to this heading"></a></h4>
<p>I can’t think of a use case for protected projects,
since they aren’t listed publicly on the commercial site.</p>
<p>The migration path for versions of protected projects is the same as a private project.</p>
</section>
<section id="public-project-commercial">
<h4>Public project (commercial)<a class="headerlink" href="#public-project-commercial" title="Link to this heading"></a></h4>
<p>Currently we show links back to project dashboard if the project is public,
which probably users shouldn’t see.
With the implementation of this design doc,
public versions don’t have links to the project dashboard (except for admin users) and the dashboard is always under login.</p>
<ul class="simple">
<li><p>Private versions:
Users under the organization can see links to the dashboard.
Not changes required.</p></li>
<li><p>Protected versions:
Users under the organization can see links to the dashboard.
We can do a data migration of those versions to the new <code class="docutils literal notranslate"><span class="pre">hidden</span></code> setting and make them private.</p></li>
<li><p>Public versions:
All users can see links to the dashboard.
Probably they have an open source project,
but they still want to manage access using the same teams of the organization.
Not changes are required.</p></li>
</ul>
<p>A breaking change here is:
users outside the organization would not be able to see the dashboard of the project.</p>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="pr-builder.html" class="btn btn-neutral float-left" title="Design of pull request builder" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="redirects.html" class="btn btn-neutral float-right" title="Improving redirects" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Read the Docs, Inc &amp; contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>