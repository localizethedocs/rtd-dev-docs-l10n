

<!DOCTYPE html>
<html class="writer-html5" lang="zh-TW" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="國際化" />
<meta property="og:type" content="website" />
<meta property="og:url" content="i18n.html" />
<meta property="og:site_name" content="Read the Docs Documentation" />
<meta property="og:description" content="This document covers the details regarding internationalization and localization that are applied in Read the Docs. The guidelines described are mostly based on Kitsune&#x27;s localization documentation. As with most of the Django applications out there, Read the Docs&#x27; i18n/l10n framework is..." />
<meta property="og:image" content="https://docs.readthedocs.io/en/latest/_static/img/logo-opengraph.png" />
<meta property="og:image:alt" content="Read the Docs Documentation" />
<meta name="description" content="This document covers the details regarding internationalization and localization that are applied in Read the Docs. The guidelines described are mostly based on Kitsune&#x27;s localization documentation. As with most of the Django applications out there, Read the Docs&#x27; i18n/l10n framework is..." />
<meta name="twitter:card" content="summary_large_image" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>國際化 &mdash; Read the Docs developer documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css?v=ca6f9a36" />
      <link rel="stylesheet" type="text/css" href="_static/css/sphinx_prompt_css.css?v=351d85e3" />

  
    <link rel="canonical" href="https://projects.localizethedocs.org/rtd-dev-docs-l10n/i18n.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=65c3111a"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
      <script src="_static/translations.js?v=cbf116e0"></script>
      <script src="_static/design-tabs.js?v=f930bc37"></script>
      <script src="_static/js/expand_tabs.js?v=1e151f68"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜尋" href="search.html" />
    <link rel="next" title="資料庫遷移" href="migrations.html" />
    <link rel="prev" title="前端開發" href="front-end.html" />

   

  

<script type="text/javascript" src="ltd-provenance.js"></script>
<script type="text/javascript" src="ltd-current.js"></script>
<script type="text/javascript" src="../../ltd-config.js"></script>
<script type="text/javascript" src="../../ltd-flyout.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/logo.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">一般</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">Contributing to Read the Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="code-of-conduct.html">行為守則</a></li>
<li class="toctree-l1"><a class="reference internal" href="issue-labels.html">議題標籤概覽</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">路線圖</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">開發</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">開發安裝</a></li>
<li class="toctree-l1"><a class="reference internal" href="guides/index.html">開發指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">設計 Read the Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="docs.html">Building and contributing to documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="style-guide.html">文件風格指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="front-end.html">前端開發</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">國際化</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#making-strings-localizable">Making strings localizable</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#interpolation">Interpolation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#localization-comments">Localization comments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adding-context-with-msgctxt">Adding context with msgctxt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#plurals">Plurals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#strings-in-templates">Strings in templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="#strings-in-python">Strings in Python</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#lazily-translated-strings">Lazily translated strings</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#administrative-tasks">Administrative tasks</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#updating-localization-files">Updating localization files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compiling-to-mo">Compiling to MO</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transifex-integration">Transifex 整合</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="migrations.html">資料庫遷移</a></li>
<li class="toctree-l1"><a class="reference internal" href="server-side-search.html">Server side search</a></li>
<li class="toctree-l1"><a class="reference internal" href="search-integration.html">Server side search integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="aws-temporary-credentials.html">AWS temporary credentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="subscriptions.html">訂閱</a></li>
<li class="toctree-l1"><a class="reference internal" href="github-app.html">GitHub App</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">有趣的設定</a></li>
<li class="toctree-l1"><a class="reference internal" href="tests.html">測試</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Read the Docs developer documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">國際化</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/readthedocs/readthedocs.org/blob/main/docs/dev/i18n.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="internationalization">
<h1>國際化<a class="headerlink" href="#internationalization" title="連結到這個標頭"></a></h1>
<p>This document covers the details regarding internationalization and
localization that are applied in Read the Docs. The guidelines described are
mostly based on <a class="reference external" href="https://kitsune.readthedocs.io/en/latest/localization.html">Kitsune's localization documentation</a>.</p>
<p>As with most of the Django applications out there, Read the Docs' i18n/l10n
framework is based on <a class="reference external" href="http://www.gnu.org/software/gettext/">GNU gettext</a>.
Crowd-sourced localization is optionally available at <a class="reference external" href="https://www.transifex.com/projects/p/readthedocs/">Transifex</a>.</p>
<p>For more information about the general ideas,
look at this document: <a class="reference external" href="http://www.gnu.org/software/gettext/manual/html_node/Concepts.html">http://www.gnu.org/software/gettext/manual/html_node/Concepts.html</a></p>
<section id="making-strings-localizable">
<h2>Making strings localizable<a class="headerlink" href="#making-strings-localizable" title="連結到這個標頭"></a></h2>
<p>Making strings in templates localizable is exceptionally easy. Making strings
in Python localizable is a little more complicated. The short answer, though,
is to just wrap the string in <code class="docutils literal notranslate"><span class="pre">_()</span></code>.</p>
<section id="interpolation">
<h3>Interpolation<a class="headerlink" href="#interpolation" title="連結到這個標頭"></a></h3>
<p>A string is often a combination of a fixed string and something changing, for
example, <code class="docutils literal notranslate"><span class="pre">Welcome,</span> <span class="pre">James</span></code> is a combination of the fixed part <code class="docutils literal notranslate"><span class="pre">Welcome,</span></code>,
and the changing part <code class="docutils literal notranslate"><span class="pre">James</span></code>. The naive solution is to localize the first
part and then follow it with the name:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Welcome, &#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">username</span>
</pre></div>
</div>
<p>This is <strong>wrong!</strong></p>
<p>In some locales, the word order may be different. Use Python string formatting
to interpolate the changing part into the string:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Welcome, </span><span class="si">{name}</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">username</span><span class="p">)</span>
</pre></div>
</div>
<p>Python gives you a lot of ways to interpolate strings. The best way is to use
Py3k formatting and kwargs. That's the clearest for localizers.</p>
</section>
<section id="localization-comments">
<h3>Localization comments<a class="headerlink" href="#localization-comments" title="連結到這個標頭"></a></h3>
<p>Sometimes, it can help localizers to describe where a string comes from,
particularly if it can be difficult to find in the interface, or is not very
self-descriptive (e.g. very short strings). If you immediately precede the
string with a comment that starts with <code class="docutils literal notranslate"><span class="pre">Translators:</span></code>, the comment will be
added to the PO file, and visible to localizers.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">DEFAULT_THEME_CHOICES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="c1"># Translators: This is a name of a Sphinx theme.</span>
    <span class="p">(</span><span class="n">THEME_DEFAULT</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;Default&#39;</span><span class="p">)),</span>
    <span class="c1"># Translators: This is a name of a Sphinx theme.</span>
    <span class="p">(</span><span class="n">THEME_SPHINX</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;Sphinx Docs&#39;</span><span class="p">)),</span>
    <span class="c1"># Translators: This is a name of a Sphinx theme.</span>
    <span class="p">(</span><span class="n">THEME_TRADITIONAL</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;Traditional&#39;</span><span class="p">)),</span>
    <span class="c1"># Translators: This is a name of a Sphinx theme.</span>
    <span class="p">(</span><span class="n">THEME_NATURE</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;Nature&#39;</span><span class="p">)),</span>
    <span class="c1"># Translators: This is a name of a Sphinx theme.</span>
    <span class="p">(</span><span class="n">THEME_HAIKU</span><span class="p">,</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;Haiku&#39;</span><span class="p">)),</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="adding-context-with-msgctxt">
<h3>Adding context with msgctxt<a class="headerlink" href="#adding-context-with-msgctxt" title="連結到這個標頭"></a></h3>
<p>Strings may be the same in English, but different in other languages. English,
for example, has no grammatical gender, and sometimes the noun and verb forms
of a word are identical.</p>
<p>To make it possible to localize these correctly, we can add &quot;context&quot; (known in
gettext as <em>msgctxt</em>) to differentiate two otherwise identical strings. Django
provides a <code class="xref py py-func docutils literal notranslate"><span class="pre">pgettext()</span></code> function for this.</p>
<p>For example, the string <em>Search</em> may be a noun or a verb in English. In a
heading, it may be considered a noun, but on a button, it may be a verb. It's
appropriate to add a context (like <em>button</em>) to one of them.</p>
<p>Generally, we should only add context if we are sure the strings aren't used in
the same way, or if localizers ask us to.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.utils.translation</span><span class="w"> </span><span class="kn">import</span> <span class="n">pgettext</span>

<span class="n">month</span> <span class="o">=</span> <span class="n">pgettext</span><span class="p">(</span><span class="s2">&quot;text for the search button on the form&quot;</span><span class="p">,</span> <span class="s2">&quot;Search&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="plurals">
<h3>Plurals<a class="headerlink" href="#plurals" title="連結到這個標頭"></a></h3>
<p><em>You have 1 new messages</em> grates on discerning ears. Fortunately, gettext gives
us a way to fix that in English <em>and</em> other locales, the
<code class="xref py py-func docutils literal notranslate"><span class="pre">ngettext()</span></code> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ngettext</span><span class="p">(</span><span class="s1">&#39;singular sentence&#39;</span><span class="p">,</span> <span class="s1">&#39;plural sentence&#39;</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</pre></div>
</div>
<p>A more realistic example might be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ngettext</span><span class="p">(</span><span class="s1">&#39;Found </span><span class="si">{count}</span><span class="s1"> result.&#39;</span><span class="p">,</span>
         <span class="s1">&#39;Found </span><span class="si">{count}</span><span class="s1"> results&#39;</span><span class="p">,</span>
         <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">))</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">count</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
</pre></div>
</div>
<p>This method takes three arguments because English only needs three, i.e., zero
is considered &quot;plural&quot; for English. Other languages may have <a class="reference external" href="http://translate.sourceforge.net/wiki/l10n/pluralforms">different plural
rules</a>, and require
different phrases for, say 0, 1, 2-3, 4-10, &gt;10. That's absolutely fine, and
gettext makes it possible.</p>
</section>
</section>
<section id="strings-in-templates">
<h2>Strings in templates<a class="headerlink" href="#strings-in-templates" title="連結到這個標頭"></a></h2>
<p>When putting new text into a template, all you need to do is wrap it in a
<code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">trans</span> <span class="pre">%}</span></code> template tag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="o">%</span> <span class="n">trans</span> <span class="s2">&quot;Heading&quot;</span> <span class="o">%</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Context can be added, too:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="o">%</span> <span class="n">trans</span> <span class="s2">&quot;Heading&quot;</span> <span class="n">context</span> <span class="s2">&quot;section name&quot;</span> <span class="o">%</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Comments for translators need to precede the internationalized text and must
start with the <code class="docutils literal notranslate"><span class="pre">Translators:</span></code> keyword.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="c1"># Translators: This heading is displayed in the user&#39;s profile page #}</span>
<span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="p">{</span><span class="o">%</span> <span class="n">trans</span> <span class="s2">&quot;Heading&quot;</span> <span class="o">%</span><span class="p">}</span><span class="o">&lt;/</span><span class="n">h1</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>To interpolate, you need to use the alternative and more verbose <code class="docutils literal notranslate"><span class="pre">{%</span>
<span class="pre">blocktrans</span> <span class="pre">%}</span></code> template tag — it's actually a block:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{% blocktrans %}Welcome, {{ name }}!{% endblocktrans %}
</pre></div>
</div>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">{{</span> <span class="pre">name</span> <span class="pre">}}</span></code> variable needs to exist in the template context.</p>
<p>In some situations, it's desirable to evaluate template expressions such as
filters or accessing object attributes. You can't do that within the <code class="docutils literal notranslate"><span class="pre">{%</span>
<span class="pre">blocktrans</span> <span class="pre">%}</span></code> block, so you need to bind the expression to a local variable
first:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{% blocktrans trimmed with revision.created_date|timesince as timesince %}
{{ revision }} {{ timesince }} ago
{% endblocktrans %}

{% blocktrans with project.name as name %}Delete {{ name }}?{% endblocktrans %}
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">{%</span> <span class="pre">blocktrans</span> <span class="pre">%}</span></code> also provides pluralization. For that you need to bind a
counter with the name <code class="docutils literal notranslate"><span class="pre">count</span></code> and provide a plural translation after the <code class="docutils literal notranslate"><span class="pre">{%</span>
<span class="pre">plural</span> <span class="pre">%}</span></code> tag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{% blocktrans trimmed with amount=article.price count years=i.length %}
That will cost $ {{ amount }} per year.
{% plural %}
That will cost $ {{ amount }} per {{ years }} years.
{% endblocktrans %}
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p>The previous multi-lines examples also use the <code class="docutils literal notranslate"><span class="pre">trimmed</span></code> option.
This removes newline characters and replaces any whitespace at the beginning and end of a line,
helping translators when translating these strings.</p>
</div>
</section>
<section id="strings-in-python">
<h2>Strings in Python<a class="headerlink" href="#strings-in-python" title="連結到這個標頭"></a></h2>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p>Whenever you are adding a string in Python, ask yourself if it
really needs to be there, or if it should be in the template. Keep
logic and presentation separate!</p>
</div>
<p>Strings in Python are more complex for two reasons:</p>
<ol class="arabic simple">
<li><p>We need to make sure we're always using Unicode strings and the
Unicode-friendly versions of the functions.</p></li>
<li><p>If you use the <code class="xref py py-func docutils literal notranslate"><span class="pre">gettext()</span></code> function in the
wrong place, the string may end up in the wrong locale!</p></li>
</ol>
<p>Here's how you might localize a string in a view:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.utils.translation</span><span class="w"> </span><span class="kn">import</span> <span class="n">gettext</span> <span class="k">as</span> <span class="n">_</span>

<span class="k">def</span><span class="w"> </span><span class="nf">my_view</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">is_superuser</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;Oh hi, staff!&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;You are not staff!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Interpolation is done through normal Python string formatting:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msg</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;Oh, hi, </span><span class="si">{user}</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">username</span><span class="p">)</span>
</pre></div>
</div>
<p>Context information can be supplied by using the
<code class="xref py py-func docutils literal notranslate"><span class="pre">pgettext()</span></code> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">msg</span> <span class="o">=</span> <span class="n">pgettext</span><span class="p">(</span><span class="s1">&#39;the context&#39;</span><span class="p">,</span> <span class="s1">&#39;Search&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Translator comments are normal one-line Python comments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Translators: A message to users.</span>
<span class="n">msg</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="sa">u</span><span class="s1">&#39;Oh, hi there!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you need to use plurals, import the
<code class="xref py py-func docutils literal notranslate"><span class="pre">ungettext()</span></code> function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.utils.translation</span><span class="w"> </span><span class="kn">import</span> <span class="n">ungettext</span>

<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>
<span class="n">msg</span> <span class="o">=</span> <span class="n">ungettext</span><span class="p">(</span><span class="s1">&#39;Found </span><span class="si">{0}</span><span class="s1"> result&#39;</span><span class="p">,</span> <span class="s1">&#39;Found </span><span class="si">{0}</span><span class="s1"> results&#39;</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
<section id="lazily-translated-strings">
<h3>Lazily translated strings<a class="headerlink" href="#lazily-translated-strings" title="連結到這個標頭"></a></h3>
<p>You can use <code class="xref py py-func docutils literal notranslate"><span class="pre">gettext()</span></code> or
<code class="xref py py-func docutils literal notranslate"><span class="pre">ungettext()</span></code> only in views or functions called
from views. If the function will be evaluated when the module is loaded, then
the string may end up in English or the locale of the last request!</p>
<p>Examples include strings in module-level code, arguments to functions in class
definitions, strings in functions called from outside the context of a view. To
internationalize these strings, you need to use the <code class="docutils literal notranslate"><span class="pre">_lazy</span></code> versions of the
above methods, <code class="xref py py-func docutils literal notranslate"><span class="pre">gettext_lazy()</span></code> and
<code class="xref py py-func docutils literal notranslate"><span class="pre">ungettext_lazy()</span></code>. The result doesn't get
translated until it is evaluated as a string, for example by being output or
passed to <code class="docutils literal notranslate"><span class="pre">unicode()</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">django.utils.translation</span><span class="w"> </span><span class="kn">import</span> <span class="n">gettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="k">class</span><span class="w"> </span><span class="nc">UserProfileForm</span><span class="p">(</span><span class="n">forms</span><span class="o">.</span><span class="n">ModelForm</span><span class="p">):</span>
    <span class="n">first_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;First name&#39;</span><span class="p">),</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">last_name</span> <span class="o">=</span> <span class="n">CharField</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;Last name&#39;</span><span class="p">),</span> <span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>In case you want to provide context to a lazily-evaluated gettext string, you
will need to use <code class="xref py py-func docutils literal notranslate"><span class="pre">pgettext_lazy()</span></code>.</p>
</section>
</section>
<section id="administrative-tasks">
<h2>Administrative tasks<a class="headerlink" href="#administrative-tasks" title="連結到這個標頭"></a></h2>
<section id="updating-localization-files">
<h3>Updating localization files<a class="headerlink" href="#updating-localization-files" title="連結到這個標頭"></a></h3>
<p>To update the translation source files (eg if you changed or added translatable
strings in the templates or Python code) you should run <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">manage.py</span>
<span class="pre">makemessages</span> <span class="pre">-l</span> <span class="pre">&lt;language&gt;</span></code> in the project's root directory (substitute
<code class="docutils literal notranslate"><span class="pre">&lt;language&gt;</span></code> with a valid language code).</p>
<p>The updated files can now be localized in a <a class="reference external" href="https://en.wikipedia.org/wiki/Category:Software-localization_tools">PO editor</a> or
crowd-sourced online translation tool.</p>
</section>
<section id="compiling-to-mo">
<h3>Compiling to MO<a class="headerlink" href="#compiling-to-mo" title="連結到這個標頭"></a></h3>
<p>Gettext doesn't parse any text files, it reads a binary format for faster
performance. To compile the latest PO files in the repository, Django provides
the <code class="docutils literal notranslate"><span class="pre">compilemessages</span></code> management command. For example, to compile all the
available localizations, just run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><style type="text/css">
span.prompt1:before {
  content: "$ ";
}
</style><span class="prompt1">python<span class="w"> </span>manage.py<span class="w"> </span>compilemessages<span class="w"> </span>-a</span>
</pre></div></div><p>You will need to do this every time you want to push updated translations to
the live site.</p>
<p>Also, note that it's not a good idea to track MO files in version control,
since they would need to be updated at the same pace PO files are updated, so
it's silly and not worth it. They are ignored by <code class="docutils literal notranslate"><span class="pre">.gitignore</span></code>, but please
make sure you don't forcibly add them to the repository.</p>
</section>
<section id="transifex-integration">
<h3>Transifex 整合<a class="headerlink" href="#transifex-integration" title="連結到這個標頭"></a></h3>
<p>To push updated translation source files to Transifex, run <code class="docutils literal notranslate"><span class="pre">tx</span>
<span class="pre">push</span> <span class="pre">-s</span></code> (for English) or <code class="docutils literal notranslate"><span class="pre">tx</span> <span class="pre">push</span> <span class="pre">-t</span> <span class="pre">&lt;language&gt;</span></code> (for non-English).</p>
<p>To pull changes from Transifex, run <code class="docutils literal notranslate"><span class="pre">tx</span> <span class="pre">pull</span> <span class="pre">-a</span></code>. Note that Transifex does
not compile the translation files, so you have to do this after the pull (see
the <a class="reference internal" href="#compiling-to-mo">Compiling to MO</a> section).</p>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">tx</span></code> command, read the <a class="reference external" href="https://docs.transifex.com/client/introduction/">Transifex client's
help pages</a>.</p>
<div class="admonition note">
<p class="admonition-title">備註</p>
<p>For the Read the Docs community site, we use <a class="reference external" href="https://www.pyinvoke.org/">Invoke</a>
with a <a class="reference external" href="https://github.com/readthedocs/readthedocs.org/blob/main/tasks.py">tasks.py file</a> to follow this process:</p>
<ol class="arabic">
<li><p>Update files and push sources (English) to Transifex:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">invoke<span class="w"> </span>l10n.push</span>
</pre></div></div></li>
<li><p>從 Transifex 拉取已更新的翻譯：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="prompt1">invoke<span class="w"> </span>l10n.pull</span>
</pre></div></div></li>
</ol>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="front-end.html" class="btn btn-neutral float-left" title="前端開發" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="migrations.html" class="btn btn-neutral float-right" title="資料庫遷移" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Read the Docs, Inc &amp; contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>