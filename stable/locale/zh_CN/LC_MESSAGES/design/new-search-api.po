# SOME DESCRIPTIVE TITLE.
# Copyright (C) Read the Docs, Inc & contributors
# This file is distributed under the same license as the Read the Docs developer documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: Read the Docs developer documentation stable\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-10-20 06:24+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../design/new-search-api.rst:2
msgid "New search API"
msgstr ""

#: ../../../design/new-search-api.rst:5
msgid "Goals"
msgstr ""

#: ../../../design/new-search-api.rst:7
msgid ""
"Allow to configure search at the API level, instead of having the options in "
"the database."
msgstr ""

#: ../../../design/new-search-api.rst:9
msgid "Allow to search a group of projects/versions at the same time."
msgstr ""

#: ../../../design/new-search-api.rst:10
msgid "Bring the same syntax to the dashboard search."
msgstr ""

#: ../../../design/new-search-api.rst:13
msgid "Syntax"
msgstr ""

#: ../../../design/new-search-api.rst:15
msgid ""
"The parameters will be given in the query using the ``key:value`` syntax. "
"Inspired by `GitHub <https://docs.github.com/en/rest/search>`__ and other "
"services."
msgstr ""

#: ../../../design/new-search-api.rst:18
msgid ""
"Currently the values from all parameters don't include spaces, so "
"surrounding the value with quotes won't be supported (``key:\"value\"``)."
msgstr ""

#: ../../../design/new-search-api.rst:21
msgid ""
"To avoid interpreting a query as a parameter, an escape character can be put "
"in place, for example ``project\\:docs`` won't be interpreted as a "
"parameter, but as the search term ``project:docs``. This is only necessary "
"if the query includes a valid parameter, unknown parameters (``foo:bar``) "
"don't require escaping."
msgstr ""

#: ../../../design/new-search-api.rst:28
msgid ""
"All other tokens that don't match a valid parameter, will be join to form "
"the final search term."
msgstr ""

#: ../../../design/new-search-api.rst:32
msgid "Parameters"
msgstr ""

#: ../../../design/new-search-api.rst:34
msgid "project:"
msgstr ""

#: ../../../design/new-search-api.rst:35
msgid ""
"Indicates the project and version to includes results from (this doesn't "
"include subprojects). If the version isn't provided, the default version is "
"used."
msgstr ""

#: ../../../design/new-search-api.rst:40
msgid "Examples:"
msgstr ""

#: ../../../design/new-search-api.rst:42
msgid "``project:docs/latest``"
msgstr ""

#: ../../../design/new-search-api.rst:43
msgid "``project:docs``"
msgstr ""

#: ../../../design/new-search-api.rst:45
msgid "It can be one or more project parameters. At least one is required."
msgstr ""

#: ../../../design/new-search-api.rst:48
msgid ""
"If the user doesn't have permission over one version or if the version "
"doesn't exist, we don't include results from that version. We don't fail the "
"search, this is so users can use one endpoint for all their users, without "
"worrying about what permissions each user has or updating it after a version "
"or project has been deleted."
msgstr ""

#: ../../../design/new-search-api.rst:54
msgid ""
"The ``/`` is used as separator, but it could be any other character that "
"isn't present in the slug of a version or project. ``:`` was considered "
"(``project:docs:latest``), but it could be hard to read since ``:`` is "
"already used to separate the key from the value."
msgstr ""

#: ../../../design/new-search-api.rst:59
msgid "subprojects:"
msgstr ""

#: ../../../design/new-search-api.rst:60 ../../../design/new-search-api.rst:88
msgid ""
"This allows to specify from what project exactly we are going to return "
"subprojects from, and also include the version we are going to try to match. "
"This includes the parent project in the results."
msgstr ""

#: ../../../design/new-search-api.rst:65 ../../../design/new-search-api.rst:93
msgid ""
"As the ``project`` parameter, the version can be optional, and defaults to "
"the default version of the parent project."
msgstr ""

#: ../../../design/new-search-api.rst:68
msgid "user:"
msgstr ""

#: ../../../design/new-search-api.rst:69
msgid ""
"Include results from projects the given user has access to. The only "
"supported value is ``@me``, which is an alias for the current user."
msgstr ""

#: ../../../design/new-search-api.rst:74
msgid "Including subprojects"
msgstr ""

#: ../../../design/new-search-api.rst:76
msgid ""
"Now that we are returning results only from the given projects, we need an "
"easy way to include results from subprojects. Some ideas for implementing "
"this feature are:"
msgstr ""

#: ../../../design/new-search-api.rst:81
msgid "``include-subprojects:true``"
msgstr ""

#: ../../../design/new-search-api.rst:82
msgid ""
"This doesn't make it clear from what projects we are going to include "
"subprojects from. We could make it so it returns subprojects for all "
"projects. Users will probably use this with one project only."
msgstr ""

#: ../../../design/new-search-api.rst:87
msgid "``subprojects:project/version`` (inclusive)"
msgstr ""

#: ../../../design/new-search-api.rst:96
msgid "``subprojects:project/version`` (exclusive)"
msgstr ""

#: ../../../design/new-search-api.rst:97
msgid ""
"This is the same as the above, but it doesn't include the parent project in "
"the results. If we want to include the results from the project, then the "
"query will be ``project:project/latest subprojects:project/latest``. Is this "
"useful?"
msgstr ""

#: ../../../design/new-search-api.rst:103
msgid ""
"The second option was chosen, since that's the current behavior of our "
"search when searching on a project with subprojects, and avoids having to "
"repeat the project if the user wants to include it in the search too."
msgstr ""

#: ../../../design/new-search-api.rst:109
msgid "Cache"
msgstr ""

#: ../../../design/new-search-api.rst:111
msgid ""
"Since the request could be attached to more than one project. We will return "
"all the list of projects for the cache tags, this is ``project1, project1:"
"version, project2, project2:version``."
msgstr ""

#: ../../../design/new-search-api.rst:116
msgid "CORS"
msgstr ""

#: ../../../design/new-search-api.rst:118
msgid ""
"Since the request could be attached to more than one project. we can't make "
"the decision if we should enable CORS or not on a given request from the "
"middleware easily, so we won't allow cross site requests when using the new "
"API for now. We would need to refactor our CORS code, so every view can "
"decide if CORS should be allowed or not, for this case, cross site requests "
"will be allowed only if all versions of the final search are public, another "
"alternative could be to always allow cross site requests, but when a request "
"is cross site, we only return results from public versions."
msgstr ""

#: ../../../design/new-search-api.rst:128
msgid "Analytics"
msgstr ""

#: ../../../design/new-search-api.rst:130
msgid ""
"We will record the same query for each project that was used in the final "
"search."
msgstr ""

#: ../../../design/new-search-api.rst:133
msgid "Response"
msgstr ""

#: ../../../design/new-search-api.rst:135
msgid ""
"The response will be similar to the old one, but will include extra "
"information about the search, like the projects, versions, and the query "
"that were used in the final search."
msgstr ""

#: ../../../design/new-search-api.rst:139
msgid ""
"And the ``version``, ``project``, and ``project_alias`` attributes will now "
"be objects."
msgstr ""

#: ../../../design/new-search-api.rst:142
msgid ""
"We could just reuse the old response too, since the only breaking changes "
"would be the attributes now being objects, and we aren't adding any new "
"information to those objects (yet). But also, re-using the current "
"serializers shouldn't be a problem either."
msgstr ""

#: ../../../design/new-search-api.rst:147
msgid ""
"{\n"
"  \"count\": 1,\n"
"  \"next\": null,\n"
"  \"previous\": null,\n"
"  \"projects\": [\n"
"    {\n"
"      \"slug\": \"docs\",\n"
"      \"versions\": [\n"
"        {\n"
"          \"slug\": \"latest\"\n"
"        }\n"
"      ]\n"
"    }\n"
"  ],\n"
"  \"query\": \"The final query used in the search\",\n"
"  \"results\": [\n"
"    {\n"
"      \"type\": \"page\",\n"
"      \"project\": {\n"
"        \"slug\": \"docs\",\n"
"        \"alias\": null\n"
"      },\n"
"      \"version\": {\n"
"        \"slug\": \"latest\"\n"
"      },\n"
"      \"title\": \"Main Features\",\n"
"      \"path\": \"/en/latest/features.html\",\n"
"      \"domain\": \"https://docs.readthedocs.io\",\n"
"      \"highlights\": {\n"
"        \"title\": []\n"
"      },\n"
"      \"blocks\": [\n"
"        {\n"
"          \"type\": \"section\",\n"
"          \"id\": \"full-text-search\",\n"
"          \"title\": \"Full-Text Search\",\n"
"          \"content\": \"We provide search across all the projects that we "
"host. This actually comes in two different search experiences: dashboard "
"search on the Read the Docs dashboard and in-doc search on documentation "
"sites, using your own theme and our search results. We offer a number of "
"search features: Search across subprojects Search results land on the exact "
"content you were looking for Search across projects you have access to "
"(available on Read the Docs for Business) A full range of search operators "
"including exact matching and excluding phrases. Learn more about Server Side "
"Search.\",\n"
"          \"highlights\": {\n"
"            \"title\": [\n"
"              \"Full-<span>Text</span> Search\"\n"
"            ],\n"
"            \"content\": []\n"
"          }\n"
"        },\n"
"        {\n"
"          \"type\": \"domain\",\n"
"          \"role\": \"http:post\",\n"
"          \"name\": \"/api/v3/projects/\",\n"
"          \"id\": \"post--api-v3-projects-\",\n"
"          \"content\": \"Import a project under authenticated user. Example "
"request: BashPython$ curl \\\\ -X POST \\\\ -H \\\"Authorization: Token "
"<token>\\\" https://app.readthedocs.org/api/v3/projects/ \\\\ -H \\\"Content-"
"Type: application/json\\\" \\\\ -d @body.json import requests import json "
"URL = 'https://app.readthedocs.org/api/v3/projects/' TOKEN = '<token>' "
"HEADERS = {'Authorization': f'token {TOKEN}'} data = json.load(open('body."
"json', 'rb')) response = requests.post( URL, json=data, headers=HEADERS, ) "
"print(response.json()) The content of body.json is like, { \\\"name\\\": \\"
"\"Test Project\\\", \\\"repository\\\": { \\\"url\\\": \\\"https://github."
"com/readthedocs/template\\\", \\\"type\\\": \\\"git\\\" }, \\\"homepage\\\": "
"\\\"http://template.readthedocs.io/\\\", \\\"programming_language\\\": \\"
"\"py\\\", \\\"language\\\": \\\"es\\\" } Example response: See Project "
"details Note Read the Docs for Business, also accepts\",\n"
"          \"highlights\": {\n"
"            \"name\": [],\n"
"            \"content\": [\n"
"              \", json=data, headers=HEADERS, ) print(response.json()) The "
"content of body.json is like,  &quot;name&quot;: &quot;<span>Test</span>\"\n"
"            ]\n"
"          }\n"
"        }\n"
"      ]\n"
"    }\n"
"  ]\n"
"}"
msgstr ""

#: ../../../design/new-search-api.rst:212
msgid "Examples"
msgstr ""

#: ../../../design/new-search-api.rst:214
msgid ""
"``project:docs project:dev/latest test``: search for ``test`` in the default "
"version of the ``docs`` project, and in the latest version of the ``dev`` "
"project."
msgstr ""

#: ../../../design/new-search-api.rst:216
msgid ""
"``a project:docs/stable search term``: search for ``a search term`` in the "
"stable version of the ``docs`` project."
msgstr ""

#: ../../../design/new-search-api.rst:219
msgid ""
"``project:docs project\\:project/version``: search for ``project::project/"
"version`` in the default version of the ``docs`` project."
msgstr ""

#: ../../../design/new-search-api.rst:222
msgid "``search``: invalid, at least one project is required."
msgstr ""

#: ../../../design/new-search-api.rst:225
msgid "Dashboard search"
msgstr ""

#: ../../../design/new-search-api.rst:227
msgid ""
"This is the search feature that you can access from the readthedocs.org/"
"readthedocs.com domains."
msgstr ""

#: ../../../design/new-search-api.rst:230
msgid "We have two types:"
msgstr ""

#: ../../../design/new-search-api.rst:232
msgid "Project scoped search:"
msgstr ""

#: ../../../design/new-search-api.rst:233
msgid "Search files and versions of the current project only."
msgstr ""

#: ../../../design/new-search-api.rst:235
msgid "Global search:"
msgstr ""

#: ../../../design/new-search-api.rst:236
msgid ""
"Search files and versions of all projects in .org, and only the projects the "
"user has access to in .com."
msgstr ""

#: ../../../design/new-search-api.rst:239
msgid "Global search also allows to search projects by name/description."
msgstr ""

#: ../../../design/new-search-api.rst:241
msgid ""
"This search also allows you to see the number of results from other projects/"
"versions/sphinx domains (facets)."
msgstr ""

#: ../../../design/new-search-api.rst:245
msgid "Project scoped search"
msgstr ""

#: ../../../design/new-search-api.rst:247
msgid ""
"Here the new syntax won't have effect, since we are searching for the files "
"of one project only!"
msgstr ""

#: ../../../design/new-search-api.rst:250
msgid ""
"Another approach could be linking to the global search with ``project:"
"{project.slug}`` filled in the query."
msgstr ""

#: ../../../design/new-search-api.rst:254
msgid "Global search (projects)"
msgstr ""

#: ../../../design/new-search-api.rst:256
msgid ""
"We can keep the project search as is, without using the new syntax (since it "
"doesn't make sense there)."
msgstr ""

#: ../../../design/new-search-api.rst:260
msgid "Global search (files)"
msgstr ""

#: ../../../design/new-search-api.rst:262
msgid ""
"Using the same syntax from the API will be allowed, by default it will "
"search all projects in .org, and all projects the user has access to in .com."
msgstr ""

#: ../../../design/new-search-api.rst:266
msgid ""
"Another approach could be to allow filtering by user on .org, this is ``user:"
"stsewd`` or ``user:@me`` so a user can search all their projects easily. We "
"could allow just ``@me`` to start."
msgstr ""

#: ../../../design/new-search-api.rst:272
msgid "Facets"
msgstr ""

#: ../../../design/new-search-api.rst:274
msgid "We will support only the ``projects`` facet to start."
msgstr ""

#: ../../../design/new-search-api.rst:276
msgid ""
"We can keep the facets, but they would be a little different, since with the "
"new syntax we need to specify a project in order to search for a version, i."
"e, we can't search all ``latest`` versions of all projects."
msgstr ""

#: ../../../design/new-search-api.rst:280
msgid ""
"By default we will use/show the ``project`` facet, and after the user has "
"filtered by a project, we will use/show the ``version`` facet."
msgstr ""

#: ../../../design/new-search-api.rst:284
msgid ""
"If the user searches more than one project, things get complicated, should "
"we keep showing the ``version`` facet? If clicked, should we change the "
"version on all the projects?"
msgstr ""

#: ../../../design/new-search-api.rst:288
msgid ""
"If that is too complicated to explain/implement, we should be fine by just "
"supporting the ``project`` facet for now."
msgstr ""

#: ../../../design/new-search-api.rst:293
msgid "Backwards compatibility"
msgstr ""

#: ../../../design/new-search-api.rst:295
msgid ""
"We should be able to keep the old URLs working in the global search, but we "
"could also just ignore the old syntax, or transform the old syntax to the "
"new one and redirect the user to it, for example ``?"
"q=test&project=docs&version=latest`` would be transformed to ``?q=test "
"project:docs/latest``."
msgstr ""

#: ../../../design/new-search-api.rst:302
msgid "Future features"
msgstr ""

#: ../../../design/new-search-api.rst:304
msgid ""
"Allow searching on several versions of the same project (the API response is "
"prepared to support this)."
msgstr ""

#: ../../../design/new-search-api.rst:306
msgid ""
"Allow searching on all versions of a project easily, with a syntax like "
"``project:docs/*`` or ``project:docs/@all``."
msgstr ""

#: ../../../design/new-search-api.rst:308
msgid "Allow specify the type of search:"
msgstr ""

#: ../../../design/new-search-api.rst:310
msgid "Multi match (query as is)"
msgstr ""

#: ../../../design/new-search-api.rst:311
msgid "Simple query string (allows using the ES query syntax)"
msgstr ""

#: ../../../design/new-search-api.rst:312
msgid "Fuzzy search (same as multi match, but with fuzziness)"
msgstr ""

#: ../../../design/new-search-api.rst:314
msgid ""
"Add the ``org`` filter, so users can search by all projects that belong to "
"an organization. We would show results of the default versions of each "
"project."
msgstr ""
