# SOME DESCRIPTIVE TITLE.
# Copyright (C) Read the Docs, Inc & contributors
# This file is distributed under the same license as the Read the Docs developer documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: Read the Docs developer documentation latest\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-10-27 08:22+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../design/refactor-remote-repository.rst:3
msgid "Refactor ``RemoteRepository`` object"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:6
msgid ""
"This document describes the current usage of ``RemoteRepository`` objects "
"and proposes a new normalized modeling."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:10
msgid "Goals"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:12
msgid "De-duplicate data stored in our database."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:13
msgid "Save only one ``RemoteRepository`` per GitHub repository."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:14
msgid ""
"Use an intermediate table between ``RemoteRepository`` and ``User`` to store "
"associated remote data for the specific user."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:15
msgid ""
"Make this model usable from our SSO implementation (adding ``remote_id`` "
"field in ``Remote`` objects)."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:16
msgid "Use Post ``JSONField`` to store associated ``json`` remote data."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:17
msgid ""
"Make ``Project`` connect directly to ``RemoteRepository`` without being "
"linked to a specific ``User``."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:18
msgid ""
"Do not disconnect ``Project`` and ``RemoteRepository`` when a user delete/"
"disconnects their account."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:22
msgid "Non-goals"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:24
msgid "Keep ``RemoteRepository`` in sync with GitHub repositories."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:25
msgid "Delete ``RemoteRepository`` objects deleted from GitHub."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:26
msgid ""
"Listen to GitHub events to detect ``full_name`` changes and update our "
"objects."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:30
msgid ""
"We may need/want some of these non-goals in the future. They are just "
"outside the scope of this document."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:35
msgid "Current implementation"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:37
msgid "When a user connect their account to a social account, we create a"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:39
msgid ""
"``allauth.socialaccount.models.SocialAccount`` * basic information "
"(provider, last login, etc) * provider's specific data saved in a JSON under "
"``extra_data``"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:42
msgid ""
"``allauthsocialaccount.models.SocialToken`` * token to hit the API on behalf "
"the user"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:46
msgid ""
"We *don't create* any ``RemoteRepository`` at this point. They are created "
"when the user jumps into \"Import Project\" page and hit the circled arrows. "
"It triggers ``sync_remote_repostories`` task in background that updates or "
"creates ``RemoteRepositories``, but **it does not delete** them (after "
"`#7183`_ and `#7310`_ got merged, they will be deleted). One "
"``RemoteRepository`` is created per repository the ``User`` has access to."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:54
msgid ""
"In corporate, we are automatically syncing ``RemoteRepository`` and "
"``RemoteOganization`` at signup (foreground) and login (background) via a "
"signal. We should eventually move these to community."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:64
msgid "Where ``RemoteRepository`` is used?"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:66
msgid "List of available repositories to import under \"Import Project\""
msgstr ""

#: ../../../design/refactor-remote-repository.rst:67
msgid ""
"Show a \"+\", \"External Arrow\" or a \"Lock\" sign next to the element in "
"the list * +: it's available to be imported * External Arrow: the repository "
"is already imported (see `RemoteRepository.matches`_ method) * Lock: user "
"doesn't have (admin) permissions to import this repository (uses "
"``RemoteRepository.private`` and ``RemoteRepository.admin``)"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:71
msgid "Avatar URL in the list of project available to import"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:72
msgid ""
"`Update webhook`_ when user clicks \"Resync webhook\" from the :guilabel:"
"`Admin` > :guilabel:`Integrations` tab"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:73
msgid "`Send build status`_ when building Pull Requests"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:82
msgid "New normalized implementation"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:84
msgid ""
"The ``ManyToMany`` relation ``RemoteRepository.users`` will be changed to be "
"``ManyToMany(through='RemoteRelation')`` `to add extra fields in the "
"relation`_ that are specific only for the User. Allows us to have *only one* "
"``RemoteRepository`` per GitHub repository with multiple relationships to "
"``User``."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:90
msgid ""
"With this modeling, we can avoid the disconnection ``Project`` and "
"``RemoteRepository`` only by removing the ``RemoteRelation``."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:94
msgid ""
"All the points mentioned in the previous section may need to be adapted to "
"use the new normalized modeling. However, it may be only field renaming or "
"small query changes over new fields."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:99
msgid "Use this modeling for SSO"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:101
msgid "We can get the list of ``Project`` where a user as access:"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:103
msgid ""
"admin_remote_repositories = RemoteRepository.objects.filter(\n"
"    users__contains=request.user,\n"
"    users__remoterelation__admin=True,  # False for read-only access\n"
")\n"
"Project.objects.filter(remote_repository__in=admin_remote_repositories)"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:113
msgid "Rollout plan"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:115
msgid ""
"Due the constraints we have in the ``RemoteRepository`` table and its size, "
"we can't just do the data migration at the same time of the deploy. Because "
"of this we need to be more creative here and find a way to re-sync the data "
"from VCS providers, while the site continue working."
msgstr ""

#: ../../../design/refactor-remote-repository.rst:120
msgid "To achieve this, we thought on following this steps:"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:122
msgid ""
"1. modify all the Python code to use the new modeling in .org and .com (will "
"help us to find out bugs locally in an easier way) 1. QA this locally with "
"test data 1. enable Django signal to re-sync RemoteRepository on login async "
"(we already have this in .com). New active users will have updated data "
"immediately 1. spin up a new instance with the new refactored code 1. run "
"migrations to create a new table for `RemoteRepository` 1. re-sync "
"everything from VCS providers into the new table for 1-week or so 1. dump-n-"
"load `Project - RemoteRepository` relations 1. create a migration to use the "
"new table with synced data 1. deploy new code once the sync is finished"
msgstr ""

#: ../../../design/refactor-remote-repository.rst:132
msgid ""
"See these issues for more context: * https://github.com/readthedocs/"
"readthedocs.org/pull/7536#issuecomment-724102640 * https://github.com/"
"readthedocs/readthedocs.org/pull/7675#issuecomment-732756118"
msgstr ""
