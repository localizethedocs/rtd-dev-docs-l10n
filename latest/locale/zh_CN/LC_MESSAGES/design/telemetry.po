# SOME DESCRIPTIVE TITLE.
# Copyright (C) Read the Docs, Inc & contributors
# This file is distributed under the same license as the Read the Docs developer documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: Read the Docs developer documentation latest\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-10-27 08:22+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../design/telemetry.rst:2
msgid "Collect data about builds"
msgstr ""

#: ../../../design/telemetry.rst:4
msgid ""
"We may want to take some decisions in the future about deprecations and "
"supported versions. Right now we don't have data about the usage of packages "
"and their versions on Read the Docs to be able to make an informed decision."
msgstr ""

#: ../../../design/telemetry.rst:13
msgid "Tools"
msgstr ""

#: ../../../design/telemetry.rst:15
msgid "Kibana:"
msgstr ""

#: ../../../design/telemetry.rst:16
msgid "https://www.elastic.co/kibana"
msgstr ""

#: ../../../design/telemetry.rst:17
msgid "We can import data from ES."
msgstr ""

#: ../../../design/telemetry.rst:18
msgid "Cloud service provided by Elastic."
msgstr ""

#: ../../../design/telemetry.rst:19
msgid "Superset:"
msgstr ""

#: ../../../design/telemetry.rst:20
msgid "https://superset.apache.org/"
msgstr ""

#: ../../../design/telemetry.rst:21
msgid "We can import data from several DBs (including postgres and ES)."
msgstr ""

#: ../../../design/telemetry.rst:22
msgid ""
"Easy to setup locally, but doesn't look like there is cloud provider for it."
msgstr ""

#: ../../../design/telemetry.rst:23
msgid "Metabase:"
msgstr ""

#: ../../../design/telemetry.rst:24
msgid "https://www.metabase.com/"
msgstr ""

#: ../../../design/telemetry.rst:25
msgid "We can import data from several DBs (including postgres)."
msgstr ""

#: ../../../design/telemetry.rst:26
msgid "Cloud service provided by Metabase."
msgstr ""

#: ../../../design/telemetry.rst:28
msgid ""
"Summary: We have several tools that can inspect data form a postgres DB, and "
"we also have ``Kibana`` that works *only* with ElasticSearch. The data to be "
"collected can be saved in a postgres or ES database. Currently, we are "
"making use of Metabase to get other information, so it's probably the right "
"choice for this task."
msgstr ""

#: ../../../design/telemetry.rst:35
msgid "Data to be collected"
msgstr ""

#: ../../../design/telemetry.rst:37
msgid "The following data can be collected after installing all dependencies."
msgstr ""

#: ../../../design/telemetry.rst:40
msgid "Configuration file"
msgstr ""

#: ../../../design/telemetry.rst:42
msgid ""
"We are saving the config file in our database, but to save some space we are "
"saving it only if it's different than the one from a previous build (if it's "
"the same we save a reference to it)."
msgstr ""

#: ../../../design/telemetry.rst:46
msgid ""
"The config file being saved isn't the original one used by the user, but the "
"result of merging it with its default values."
msgstr ""

#: ../../../design/telemetry.rst:49
msgid ""
"We may also want to have the original config file, so we know which settings "
"users are using."
msgstr ""

#: ../../../design/telemetry.rst:53
msgid "PIP packages"
msgstr ""

#: ../../../design/telemetry.rst:55
msgid ""
"We can get a json with all and root dependencies with ``pip list``. This "
"will allow us to have the name of the packages and their versions used in "
"the build."
msgstr ""

#: ../../../design/telemetry.rst:58
msgid ""
"$ pip list --pre --local --format json | jq\n"
"# and\n"
"$ pip list --pre --not-required --local --format json | jq\n"
"[\n"
"   {\n"
"      \"name\": \"requests-mock\",\n"
"      \"version\": \"1.8.0\"\n"
"   },\n"
"   {\n"
"      \"name\": \"requests-toolbelt\",\n"
"      \"version\": \"0.9.1\"\n"
"   },\n"
"   {\n"
"      \"name\": \"rstcheck\",\n"
"      \"version\": \"3.3.1\"\n"
"   },\n"
"   {\n"
"      \"name\": \"selectolax\",\n"
"      \"version\": \"0.2.10\"\n"
"   },\n"
"   {\n"
"      \"name\": \"slumber\",\n"
"      \"version\": \"0.7.1\"\n"
"   },\n"
"   {\n"
"      \"name\": \"sphinx-autobuild\",\n"
"      \"version\": \"2020.9.1\"\n"
"   },\n"
"   {\n"
"      \"name\": \"sphinx-hoverxref\",\n"
"      \"version\": \"0.5b1\"\n"
"   },\n"
"]"
msgstr ""

#: ../../../design/telemetry.rst:94
msgid ""
"With the ``--not-required`` option, pip will list only the root dependencies."
msgstr ""

#: ../../../design/telemetry.rst:97
msgid "Conda packages"
msgstr ""

#: ../../../design/telemetry.rst:99
msgid ""
"We can get a json with all dependencies with ``conda list --json``. That "
"command gets all the root dependencies and their dependencies (there is no "
"way to list only the root dependencies), so we may be collecting some noise, "
"but we can use ``pip list`` as a secondary source."
msgstr ""

#: ../../../design/telemetry.rst:104
msgid ""
"$ conda list --json --name conda-env\n"
"\n"
"[\n"
"   {\n"
"      \"base_url\": \"https://conda.anaconda.org/conda-forge\",\n"
"      \"build_number\": 0,\n"
"      \"build_string\": \"py_0\",\n"
"      \"channel\": \"conda-forge\",\n"
"      \"dist_name\": \"alabaster-0.7.12-py_0\",\n"
"      \"name\": \"alabaster\",\n"
"      \"platform\": \"noarch\",\n"
"      \"version\": \"0.7.12\"\n"
"   },\n"
"   {\n"
"      \"base_url\": \"https://conda.anaconda.org/conda-forge\",\n"
"      \"build_number\": 0,\n"
"      \"build_string\": \"pyh9f0ad1d_0\",\n"
"      \"channel\": \"conda-forge\",\n"
"      \"dist_name\": \"asn1crypto-1.4.0-pyh9f0ad1d_0\",\n"
"      \"name\": \"asn1crypto\",\n"
"      \"platform\": \"noarch\",\n"
"      \"version\": \"1.4.0\"\n"
"   },\n"
"   {\n"
"      \"base_url\": \"https://conda.anaconda.org/conda-forge\",\n"
"      \"build_number\": 3,\n"
"      \"build_string\": \"3\",\n"
"      \"channel\": \"conda-forge\",\n"
"      \"dist_name\": \"python-3.5.4-3\",\n"
"      \"name\": \"python\",\n"
"      \"platform\": \"linux-64\",\n"
"      \"version\": \"3.5.4\"\n"
"   }\n"
"]"
msgstr ""

#: ../../../design/telemetry.rst:142
msgid "APT packages"
msgstr ""

#: ../../../design/telemetry.rst:144
msgid ""
"We can get the list from the config file, or we can list the packages "
"installed with ``dpkg --get-selections``. That command would list all pre-"
"installed packages as well, so we may be getting some noise."
msgstr ""

#: ../../../design/telemetry.rst:148
msgid ""
"$ dpkg --get-selections\n"
"\n"
"adduser                                         install\n"
"apt                                             install\n"
"base-files                                      install\n"
"base-passwd                                     install\n"
"bash                                            install\n"
"binutils                                        install\n"
"binutils-common:amd64                           install\n"
"binutils-x86-64-linux-gnu                       install\n"
"bsdutils                                        install\n"
"build-essential                                 install"
msgstr ""

#: ../../../design/telemetry.rst:163
msgid "We can get the installed version with:"
msgstr ""

#: ../../../design/telemetry.rst:165
msgid ""
"$ dpkg --status python3\n"
"\n"
"Package: python3\n"
"Status: install ok installed\n"
"Priority: optional\n"
"Section: python\n"
"Installed-Size: 189\n"
"Maintainer: Ubuntu Developers <ubuntu-devel-discuss@lists.ubuntu.com>\n"
"Architecture: amd64\n"
"Multi-Arch: allowed\n"
"Source: python3-defaults\n"
"Version: 3.8.2-0ubuntu2\n"
"Replaces: python3-minimal (<< 3.1.2-2)\n"
"Provides: python3-profiler\n"
"Depends: python3.8 (>= 3.8.2-1~), libpython3-stdlib (= 3.8.2-0ubuntu2)\n"
"Pre-Depends: python3-minimal (= 3.8.2-0ubuntu2)\n"
"Suggests: python3-doc (>= 3.8.2-0ubuntu2), python3-tk (>= 3.8.2-1~), python3-"
"venv (>= 3.8.2-0ubuntu2)\n"
"Description: interactive high-level object-oriented language (default "
"python3 version)\n"
"Python, the high-level, interactive object oriented language,\n"
"includes an extensive class library with lots of goodies for\n"
"network programming, system administration, sounds and graphics.\n"
".\n"
"This package is a dependency package, which depends on Debian's default\n"
"Python 3 version (currently v3.8).\n"
"Homepage: https://www.python.org/\n"
"Original-Maintainer: Matthias Klose <doko@debian.org>"
msgstr ""

#: ../../../design/telemetry.rst:194
msgid "Or with"
msgstr ""

#: ../../../design/telemetry.rst:196
msgid ""
"$ apt-cache policy python3\n"
"\n"
"Installed: 3.8.2-0ubuntu2\n"
"Candidate: 3.8.2-0ubuntu2\n"
"Version table:\n"
"*** 3.8.2-0ubuntu2 500\n"
"      500 http://archive.ubuntu.com/ubuntu focal/main amd64 Packages\n"
"      100 /var/lib/dpkg/status"
msgstr ""

#: ../../../design/telemetry.rst:208
msgid "Python"
msgstr ""

#: ../../../design/telemetry.rst:210
msgid ""
"We can get the Python version from the config file when using a Python "
"environment, and from the ``conda list`` output when using a Conda "
"environment."
msgstr ""

#: ../../../design/telemetry.rst:214
msgid "OS"
msgstr ""

#: ../../../design/telemetry.rst:216
msgid ""
"We can infer the OS version from the build image used in the config file, "
"but since it changes with time, we can get it from the OS itself:"
msgstr ""

#: ../../../design/telemetry.rst:219
msgid ""
"$ lsb_release --description\n"
"Description:    Ubuntu 18.04.5 LTS\n"
"# or\n"
"$ cat /etc/issue\n"
"Ubuntu 18.04.5 LTS \\n \\l"
msgstr ""

#: ../../../design/telemetry.rst:228
msgid "Format"
msgstr ""

#: ../../../design/telemetry.rst:230
msgid "The final information to be saved would consist of:"
msgstr ""

#: ../../../design/telemetry.rst:232
msgid "organization: the organization id/slug"
msgstr ""

#: ../../../design/telemetry.rst:233
msgid "project: the project id/slug"
msgstr ""

#: ../../../design/telemetry.rst:234
msgid "version: the version id/slug"
msgstr ""

#: ../../../design/telemetry.rst:235
msgid "build: the build id, date, length, status."
msgstr ""

#: ../../../design/telemetry.rst:236
msgid "user_config: Original user config file"
msgstr ""

#: ../../../design/telemetry.rst:237
msgid "final_config: Final configuration used (merged with defaults)"
msgstr ""

#: ../../../design/telemetry.rst:238
msgid "packages.pip: List of pip packages with name and version"
msgstr ""

#: ../../../design/telemetry.rst:239
msgid "packages.conda: List of conda packages with name, channel, and version"
msgstr ""

#: ../../../design/telemetry.rst:240
msgid "packages.apt: List of apt packages"
msgstr ""

#: ../../../design/telemetry.rst:241
msgid "python: Python version used"
msgstr ""

#: ../../../design/telemetry.rst:242
msgid "os: Operating system used"
msgstr ""

#: ../../../design/telemetry.rst:244
msgid ""
"{\n"
"  \"organization\": {\n"
"    \"id\": 1,\n"
"    \"slug\": \"org\"\n"
"  },\n"
"  \"project\": {\n"
"    \"id\": 2,\n"
"    \"slug\": \"docs\"\n"
"  },\n"
"  \"version\": {\n"
"    \"id\": 1,\n"
"    \"slug\": \"latest\"\n"
"  },\n"
"  \"build\": {\n"
"    \"id\": 3,\n"
"    \"date/start\": \"2021-04-20-...\",\n"
"    \"length\": \"00:06:34\",\n"
"    \"status\": \"normal\",\n"
"    \"success\": true,\n"
"    \"commit\": \"abcd1234\"\n"
"  },\n"
"  \"config\": {\n"
"    \"user\": {},\n"
"    \"final\": {}\n"
"  },\n"
"  \"packages\": {\n"
"     \"pip\": [{\n"
"        \"name\": \"sphinx\",\n"
"        \"version\": \"3.4.5\"\n"
"     }],\n"
"     \"pip_all\": [\n"
"       {\n"
"          \"name\": \"sphinx\",\n"
"          \"version\": \"3.4.5\"\n"
"       },\n"
"       {\n"
"          \"name\": \"docutils\",\n"
"          \"version\": \"0.16.0\"\n"
"       }\n"
"     ],\n"
"     \"conda\": [{\n"
"        \"name\": \"sphinx\",\n"
"        \"channel\": \"conda-forge\",\n"
"        \"version\": \"0.1\"\n"
"     }],\n"
"     \"apt\": [{\n"
"        \"name\": \"python3-dev\",\n"
"        \"version\": \"3.8.2-0ubuntu2\"\n"
"     }],\n"
"  },\n"
"  \"python\": \"3.7\",\n"
"  \"os\": \"ubuntu-18.04.5\"\n"
"}"
msgstr ""

#: ../../../design/telemetry.rst:301
msgid "Storage"
msgstr ""

#: ../../../design/telemetry.rst:303
msgid ""
"All this information can be collected after the build has finished, and we "
"can store it in a dedicated database (telemetry), using Django's models."
msgstr ""

#: ../../../design/telemetry.rst:306
msgid ""
"Since this information isn't sensitive, we should be fine saving this data "
"even if the project/version is deleted. As we don't care about historical "
"data, we can save the information per-version and from their latest build "
"only. And delete old data if it grows too much."
msgstr ""

#: ../../../design/telemetry.rst:312
msgid ""
"Should we make heavy use of JSON fields? Or try to avoid nesting structures "
"as possible? Like config.user/config.final vs user_config/final_config. Or "
"having several fields in our model instead of just one big json field?"
msgstr ""
