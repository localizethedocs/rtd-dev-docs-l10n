# SOME DESCRIPTIVE TITLE.
# Copyright (C) Read the Docs, Inc & contributors
# This file is distributed under the same license as the Read the Docs developer documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: Read the Docs developer documentation latest\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-10-20 06:23+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../design/future-builder.rst:2
msgid "Future builder"
msgstr ""

#: ../../../design/future-builder.rst:8
msgid ""
"This document is a continuation of Santos' work about \"`Explicit "
"Builders`_\". It builds on top of that document some extra features and "
"makes some decisions about the final goal, proposing a clear direction to "
"move forward with intermediate steps keeping backward and forward "
"compatibility."
msgstr ""

#: ../../../design/future-builder.rst:16
msgid ""
"A lot of things have changed since this document was written. We have had "
"multiple discussions where we already took some decisions and discarded some "
"of the ideas/details proposed here. The document was merged as-is without a "
"cleaned up and there could be some inconsistencies. Note that ``build.jobs`` "
"and ``build.commands`` are already implemented *without definig a contract* "
"yet, and with small differences from the idea described here."
msgstr ""

#: ../../../design/future-builder.rst:22
msgid ""
"Please, refer to the following links to read more about all the discussions "
"we already had:"
msgstr ""

#: ../../../design/future-builder.rst:24
msgid "Public discussions:"
msgstr ""

#: ../../../design/future-builder.rst:26
msgid "https://github.com/readthedocs/readthedocs.org/issues/9062"
msgstr ""

#: ../../../design/future-builder.rst:27
msgid "https://github.com/readthedocs/readthedocs.org/issues/1083"
msgstr ""

#: ../../../design/future-builder.rst:28
msgid "https://github.com/readthedocs/readthedocs.org/issues/9063"
msgstr ""

#: ../../../design/future-builder.rst:29
msgid "https://github.com/readthedocs/readthedocs.org/issues/9088"
msgstr ""

#: ../../../design/future-builder.rst:31
msgid "Private discussions:"
msgstr ""

#: ../../../design/future-builder.rst:33
msgid "https://github.com/readthedocs/meta/discussions/9"
msgstr ""

#: ../../../design/future-builder.rst:34
msgid "https://github.com/readthedocs/meta/discussions/14"
msgstr ""

#: ../../../design/future-builder.rst:35
msgid "https://github.com/readthedocs/meta/discussions/17"
msgstr ""

#: ../../../design/future-builder.rst:40
msgid "Goals"
msgstr ""

#: ../../../design/future-builder.rst:42
msgid "Keep the current builder working as-is"
msgstr ""

#: ../../../design/future-builder.rst:43
msgid "Keep backward and forward (with intermediate steps) compatibility"
msgstr ""

#: ../../../design/future-builder.rst:44
msgid "Define a clear support for newbie, intermediate and advanced users"
msgstr ""

#: ../../../design/future-builder.rst:45
msgid ""
"Allow users to override a command, run pre/post hook commands or define all "
"commands by themselves"
msgstr ""

#: ../../../design/future-builder.rst:46
msgid ""
"Remove the Read the Docs requirement of having access to the build process"
msgstr ""

#: ../../../design/future-builder.rst:47
msgid ""
"Translate our current magic at build time to a defined contract with the user"
msgstr ""

#: ../../../design/future-builder.rst:48
msgid ""
"Provide a way to add a command argument without implementing it as a config "
"file (e.g. ``fail_on_warning``)"
msgstr ""

#: ../../../design/future-builder.rst:49
msgid "Define a path forward towards supporting other tools"
msgstr ""

#: ../../../design/future-builder.rst:50
msgid ""
"Re-write all ``readthedocs-sphinx-ext`` features to post-processsing HTML "
"features"
msgstr ""

#: ../../../design/future-builder.rst:51
msgid "Reduce complexity maintained by Read the Docs' core team"
msgstr ""

#: ../../../design/future-builder.rst:52
msgid ""
"Make Read the Docs responsible for Sphinx support and delegate other tools "
"to the community"
msgstr ""

#: ../../../design/future-builder.rst:53
msgid "Eventually support upload pre-build docs"
msgstr ""

#: ../../../design/future-builder.rst:54
msgid ""
"Allow us to add a feature with a defined contract without worry about "
"breaking old builds"
msgstr ""

#: ../../../design/future-builder.rst:55
msgid ""
"Introduce ``build.builder: 2`` config (does not install pre-defined "
"packages) for these new features"
msgstr ""

#: ../../../design/future-builder.rst:56
msgid ""
"Motivate users to migrate to ``v2`` to finally deprecate this magic by "
"educating users"
msgstr ""

#: ../../../design/future-builder.rst:60
msgid "Steps ran by the builder"
msgstr ""

#: ../../../design/future-builder.rst:62
msgid ""
"Read the Docs currently controls all the build process. Users are only "
"allowed to modify very limited behavior by using a ``.readthedocs.yaml`` "
"file. This drove us to implement features like ``sphinx.fail_on_warning``, "
"``submodules``, among others, at a high implementation and maintenance cost "
"to the core team. Besides, this hasn't been enough for more advanced users "
"that require more control over these commands."
msgstr ""

#: ../../../design/future-builder.rst:68
msgid ""
"This document proposes to clearly define the steps the builder ran and allow "
"users to override them depending on their needings:"
msgstr ""

#: ../../../design/future-builder.rst:71
msgid ""
"Newbie user / simple platform usage: Read the Docs controls all the commands "
"(current builder)"
msgstr ""

#: ../../../design/future-builder.rst:72
msgid ""
"Intermediate user: ability to override one or more commands plus running pre/"
"post hooks"
msgstr ""

#: ../../../design/future-builder.rst:73
msgid "Advanced user: controls *all the commands* executed by the builder"
msgstr ""

#: ../../../design/future-builder.rst:75
msgid "The steps identified so far are:"
msgstr ""

#: ../../../design/future-builder.rst:77
msgid "Checkout"
msgstr ""

#: ../../../design/future-builder.rst:78
msgid "Expose project data via environment variables (\\*)"
msgstr ""

#: ../../../design/future-builder.rst:79
msgid "Create environment (virtualenv / conda)"
msgstr ""

#: ../../../design/future-builder.rst:80
msgid "Install dependencies"
msgstr ""

#: ../../../design/future-builder.rst:81
msgid "Build documentation"
msgstr ""

#: ../../../design/future-builder.rst:82
msgid "Generate defined contract (``metadata.yaml``)"
msgstr ""

#: ../../../design/future-builder.rst:83
msgid "Post-process HTML (\\*)"
msgstr ""

#: ../../../design/future-builder.rst:84
msgid "Upload to storage (\\*)"
msgstr ""

#: ../../../design/future-builder.rst:86
msgid ""
"Steps marked with *(\\*)* are managed by Read the Docs and can't be "
"overwritten."
msgstr ""

#: ../../../design/future-builder.rst:90
msgid "Defined contract"
msgstr ""

#: ../../../design/future-builder.rst:92
msgid ""
"Projects building on Read the Docs must provide a ``metadata.yaml`` file "
"after running their last command. This file contains all the data required "
"by Read the Docs to be able to add its integrations. If this file is not "
"provided or malformed, Read the Docs will fail the build and stop the "
"process communicating to the user that there was a problem with the "
"``metadata.yaml`` and we require them to fix the problem."
msgstr ""

#: ../../../design/future-builder.rst:99
msgid ""
"There is no restriction about how this file is generated (e.g. generated "
"with Python, Bash, statically uploaded to the repository, etc) Read the Docs "
"does not have control over it and it's only responsible for generating it "
"when building with Sphinx."
msgstr ""

#: ../../../design/future-builder.rst:104
msgid ""
"The following is an example of a ``metadata.yaml`` that is generated by Read "
"the Docs when building Sphinx documentation:"
msgstr ""

#: ../../../design/future-builder.rst:106
msgid ""
"# metadata.yaml\n"
"version: 1\n"
"tool:\n"
"  name: sphinx\n"
"  version: 3.5.1\n"
"  builder: html\n"
"readthedocs:\n"
"  html_output: ./_build/html/\n"
"  pdf_output: ./_build/pdf/myproject.pdf\n"
"  epub_output: ./_build/pdf/myproject.epub\n"
"  search:\n"
"    enabled: true\n"
"    css_identifier: #search-form > input[name=\"q\"]\n"
"  analytics: false\n"
"  flyout: false\n"
"  canonical: docs.myproject.com\n"
"  language: en"
msgstr ""

#: ../../../design/future-builder.rst:128
msgid ""
"The ``metadata.yaml`` contract is not defined yet. This is just an example "
"of what we could expect from it to be able to add our integrations."
msgstr ""

#: ../../../design/future-builder.rst:133
msgid "Config file"
msgstr ""

#: ../../../design/future-builder.rst:135
msgid ""
"As we mentioned, we want all users to use the same config file and have a "
"clear way to override commands as they need. This will be done by using the "
"current ``.readthedocs.yaml`` file that we already have by adding two new "
"keys: ``build.jobs`` and ``build.commands``."
msgstr ""

#: ../../../design/future-builder.rst:139
msgid ""
"If neither ``build.jobs`` or ``build.commands`` are present in the config "
"file, Read the Docs will execute the builder we currently support without "
"modification, keeping compatibility with all projects already building "
"successfully."
msgstr ""

#: ../../../design/future-builder.rst:143
msgid ""
"When users make usage of ``jobs:`` or ``commands:`` keys we are not "
"responsible for them in case they fail. In these cases, we only check for a "
"``metadata.yaml`` file and run our code to add the integrations."
msgstr ""

#: ../../../design/future-builder.rst:148
msgid "``build.jobs``"
msgstr ""

#: ../../../design/future-builder.rst:150
msgid ""
"It allows users to execute one or multiple pre/post hooks and/or overwrite "
"one or multiple commands. These are some examples where this is useful:"
msgstr ""

#: ../../../design/future-builder.rst:153
msgid "User wants to pass an extra argument to ``sphinx-build``"
msgstr ""

#: ../../../design/future-builder.rst:154
msgid "Project requires to execute a command *before* building"
msgstr ""

#: ../../../design/future-builder.rst:155
msgid "User has a personal/private PyPI URL"
msgstr ""

#: ../../../design/future-builder.rst:156
msgid ""
"Install project with `pip install -e` (see https://github.com/readthedocs/"
"readthedocs.org/issues/6243)"
msgstr ""

#: ../../../design/future-builder.rst:157
msgid ""
"Disable git shallow clone (see https://github.com/readthedocs/readthedocs."
"org/issues/5989)"
msgstr ""

#: ../../../design/future-builder.rst:158
msgid ""
"Call `pip install` with `--constraint` (see https://github.com/readthedocs/"
"readthedocs.org/issues/7258)"
msgstr ""

#: ../../../design/future-builder.rst:159
msgid ""
"Do something _before_ install (see https://github.com/readthedocs/"
"readthedocs.org/issues/6662)"
msgstr ""

#: ../../../design/future-builder.rst:160
msgid ""
"Use a conda lock file to create the environment (see https://github.com/"
"readthedocs/readthedocs.org/issues/7772)"
msgstr ""

#: ../../../design/future-builder.rst:161
msgid ""
"Run a check after the build is done (e.g. ``sphinx-build -W -b linkcheck . "
"_build/html``)"
msgstr ""

#: ../../../design/future-builder.rst:162
msgid "Create virtualenv with ``--system-site-packages``"
msgstr ""

#: ../../../design/future-builder.rst:163
msgid "etc"
msgstr ""

#: ../../../design/future-builder.rst:165
msgid ""
"# .readthedocs.yaml\n"
"build:\n"
"  builder: 2\n"
"  jobs:\n"
"    pre_checkout:\n"
"    checkout: git clone --branch main https://github.com/readthedocs/"
"readthedocs.org\n"
"    post_checkout:\n"
"    pre_create_environment:\n"
"    create_environment: python -m virtualenv venv\n"
"    post_create_environment:\n"
"    pre_install:\n"
"    install: pip install -r requirements.txt\n"
"    post_install:\n"
"    pre_build:\n"
"    build:\n"
"      html: sphinx-build -T -j auto -E -b html -d _build/doctrees -D "
"language=en . _build/html\n"
"      pdf: latexmk -r latexmkrc -pdf -f -dvi- -ps- -jobname=test-builds -"
"interaction=nonstopmode\n"
"      epub: sphinx -T -j auto -b epub -d _build/doctrees -D language=en . "
"_build/epub\n"
"    post_build:\n"
"    pre_metadata:\n"
"    metadata: ./metadata_sphinx.py\n"
"    post_medatada:"
msgstr ""

#: ../../../design/future-builder.rst:193
msgid ""
"*All these commands* are executed passing all the exposed environment "
"variables."
msgstr ""

#: ../../../design/future-builder.rst:195
msgid ""
"If the user only provides a subset of these jobs, we ran our default "
"commands if the user does not provide them (see :ref:`design/future-builder:"
"Steps ran by the builder`). For example, the following YAML is enough when "
"the project requires running Doxygen as a pre-build step:"
msgstr ""

#: ../../../design/future-builder.rst:199
msgid ""
"# .readthedocs.yaml\n"
"build:\n"
"  builder: 2\n"
"  jobs:\n"
"    # https://breathe.readthedocs.io/en/latest/readthedocs.html#generating-"
"doxygen-xml-files\n"
"    pre_build: cd ../doxygen; doxygen"
msgstr ""

#: ../../../design/future-builder.rst:210
msgid "``build.commands``"
msgstr ""

#: ../../../design/future-builder.rst:212
msgid ""
"It allows users to have full control over the commands executed in the build "
"process. These are some examples where this is useful:"
msgstr ""

#: ../../../design/future-builder.rst:215
msgid "project with a custom build process that does map ours"
msgstr ""

#: ../../../design/future-builder.rst:216
msgid "specific requirements that we can't/want to cover as a general rule"
msgstr ""

#: ../../../design/future-builder.rst:217
msgid "build documentation with a different tool than Sphinx"
msgstr ""

#: ../../../design/future-builder.rst:220
msgid ""
"# .readthedocs.yaml\n"
"build:\n"
"  builder: 2\n"
"  commands:\n"
"    - git clone --branch main https://github.com/readthedocs/readthedocs."
"org\n"
"    - pip install -r requirements.txt\n"
"    - sphinx-build -T -j auto -E -b html -d _build/doctrees -D language=en . "
"_build/html\n"
"    - ./metadata.py"
msgstr ""

#: ../../../design/future-builder.rst:233
msgid "Intermediate steps for rollout"
msgstr ""

#: ../../../design/future-builder.rst:235
msgid ""
"Remove all the exposed data in the ``conf.py.tmpl`` file and move it to "
"``metadata.yaml``"
msgstr ""

#: ../../../design/future-builder.rst:236
msgid "Define structure required for ``metadata.yaml`` as contract"
msgstr ""

#: ../../../design/future-builder.rst:237
msgid ""
"Define the environment variables required (e.g. some from ``html_context``) "
"and execute all commands with them"
msgstr ""

#: ../../../design/future-builder.rst:238
msgid "Build documentation using this contract"
msgstr ""

#: ../../../design/future-builder.rst:239
msgid ""
"Leave ``readthedocs-sphinx-ext`` as the only package installed and extension "
"install in ``conf.py.tmpl``"
msgstr ""

#: ../../../design/future-builder.rst:240
msgid "Add ``build.builder: 2`` config without any *magic*"
msgstr ""

#: ../../../design/future-builder.rst:241
msgid ""
"Build everything needed to support ``build.jobs`` and ``build.commands`` keys"
msgstr ""

#: ../../../design/future-builder.rst:242
msgid "Write guides about how to use the new keys"
msgstr ""

#: ../../../design/future-builder.rst:243
msgid ""
"Re-write ``readthedocs-sphinx-ext`` features to post-process HTML features"
msgstr ""

#: ../../../design/future-builder.rst:247
msgid "Final notes"
msgstr ""

#: ../../../design/future-builder.rst:249
msgid ""
"The migration path from ``v1`` to ``v2`` will require users to explicitly "
"specify their requirements (we don't install pre-defined packages anymore)"
msgstr ""

#: ../../../design/future-builder.rst:251
msgid ""
"We probably not want to support ``build.jobs`` on ``v1`` to reduce core "
"team's time maintaining that code without the ability to update it due to "
"projects randomly breaking."
msgstr ""

#: ../../../design/future-builder.rst:253
msgid ""
"We would be able to start building documentation using new tools without "
"having to *integrate them*."
msgstr ""

#: ../../../design/future-builder.rst:254
msgid ""
"Building on Read the Docs with a new tool will require: - the user to "
"execute a different set of commands by overriding the defaults. - the "
"project/build/user to expose a ``metadata.yaml`` with the contract that Read "
"the Docs expects. - none, some or all the integrations will be added to the "
"HTML output (these have to be implemented at Read the Docs core)"
msgstr ""

#: ../../../design/future-builder.rst:258
msgid ""
"We are not responsible for extra formats (e.g. PDF, ePub, etc) on other "
"tools."
msgstr ""

#: ../../../design/future-builder.rst:259
msgid ""
"Focus on support Sphinx with nice integrations made in a tool-agnostic way "
"that can be re-used."
msgstr ""

#: ../../../design/future-builder.rst:260
msgid ""
"Removing the manipulation of ``conf.py.tmpl`` does not require us to "
"implement the same manipulation for projects using the new potential feature "
"``sphinx.yaml`` file."
msgstr ""
