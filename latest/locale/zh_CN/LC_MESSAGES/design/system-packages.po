# SOME DESCRIPTIVE TITLE.
# Copyright (C) Read the Docs, Inc & contributors
# This file is distributed under the same license as the Read the Docs developer documentation package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: Read the Docs developer documentation latest\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2025-10-20 06:23+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"Language: zh_CN\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../../design/system-packages.rst:2
msgid "Allow installation of system packages"
msgstr ""

#: ../../../design/system-packages.rst:4
msgid ""
"Currently we don't allow executing arbitrary commands in the build process. "
"The more common use case is to install extra dependencies."
msgstr ""

#: ../../../design/system-packages.rst:12
msgid "Current status"
msgstr ""

#: ../../../design/system-packages.rst:14
msgid ""
"There is a workaround when using Sphinx to run arbitrary commands, this is "
"executing the commands inside the ``conf.py`` file. There isn't a workaround "
"for MkDocs, but this problem is more common in Sphinx, since users need to "
"install some extra dependencies in order to use autodoc or build Jupyter "
"Notebooks."
msgstr ""

#: ../../../design/system-packages.rst:19
msgid ""
"However, installation of some dependencies require root access, or are "
"easier to install using ``apt``. Most of the CI services allow to use "
"``apt`` or execute any command with ``sudo``, so users are more familiar "
"with that workflow."
msgstr ""

#: ../../../design/system-packages.rst:24
msgid ""
"Some users use Conda instead of pip to install dependencies in order to "
"avoid these problems, but not all pip users are familiar with Conda, or want "
"to migrate to Conda just to use Read the Docs."
msgstr ""

#: ../../../design/system-packages.rst:28
msgid "Security concerns"
msgstr ""

#: ../../../design/system-packages.rst:30
msgid ""
"Builds are run in a Docker container, but the app controlling that container "
"lives in the same server. Allowing to execute arbitrary commands with super "
"user privileges may introduce some security issues."
msgstr ""

#: ../../../design/system-packages.rst:35
msgid "Exposing ``apt install``"
msgstr ""

#: ../../../design/system-packages.rst:37
msgid ""
"For the previous reasons we won't allow to execute arbitrary commands with "
"root (yet), but instead allow only to install extra packages using ``apt``."
msgstr ""

#: ../../../design/system-packages.rst:40
msgid ""
"We would expose this through the config file. Users will provide a list of "
"packages to install, and under the hook we would run:"
msgstr ""

#: ../../../design/system-packages.rst:43
msgid "``apt update -y``"
msgstr ""

#: ../../../design/system-packages.rst:44
msgid "``apt install -y {packages}``"
msgstr ""

#: ../../../design/system-packages.rst:46
msgid ""
"These commands will be run before the Python setup step and after the clone "
"step."
msgstr ""

#: ../../../design/system-packages.rst:50
msgid ""
"All package names must be validated to avoid injection of extra options "
"(like ``-v``)."
msgstr ""

#: ../../../design/system-packages.rst:54
msgid "Using ``docker exec``"
msgstr ""

#: ../../../design/system-packages.rst:56
msgid ""
"Currently we use ``docker exec`` to execute commands in a running container. "
"This command also allows to pass a user which is used to run the commands "
"(`#8058`_). We can run the ``apt`` commands in our current containers using "
"a super user momentarily."
msgstr ""

#: ../../../design/system-packages.rst:63
msgid "Config file"
msgstr ""

#: ../../../design/system-packages.rst:65
msgid ""
"The config file can add an additional mapping ``build.apt_packages`` to a "
"list of packages to install."
msgstr ""

#: ../../../design/system-packages.rst:67
msgid ""
"version: 2\n"
"\n"
"build:\n"
"  apt_packages:\n"
"     - cmatrix\n"
"     - mysql-server"
msgstr ""

#: ../../../design/system-packages.rst:78
msgid "Other names that were considered were:"
msgstr ""

#: ../../../design/system-packages.rst:80
msgid "``build.packages``"
msgstr ""

#: ../../../design/system-packages.rst:81
msgid "``build.extra_packages``"
msgstr ""

#: ../../../design/system-packages.rst:82
msgid "``build.system_packages``"
msgstr ""

#: ../../../design/system-packages.rst:84
msgid ""
"These were rejected to avoid confusion with existing keys, and to be "
"explicit about the type of package."
msgstr ""

#: ../../../design/system-packages.rst:88
msgid "Possible problems"
msgstr ""

#: ../../../design/system-packages.rst:90
msgid ""
"Some users may require to pass some additional flags or install from a ppa."
msgstr ""

#: ../../../design/system-packages.rst:91
msgid "Some packages may require some additional setup after installation."
msgstr ""

#: ../../../design/system-packages.rst:94
msgid "Other possible solutions"
msgstr ""

#: ../../../design/system-packages.rst:96
msgid ""
"We can allow to run the containers as root doing something similar to what "
"Travis does: They have one tool to convert the config file to a shell script "
"(travis-build_), and another that spins a docker container, executes that "
"shell script and streams the logs back (travis-worker_)."
msgstr ""

#: ../../../design/system-packages.rst:103
msgid "A similar solution could be implemented using `AWS Lambda`_."
msgstr ""

#: ../../../design/system-packages.rst:110
msgid ""
"This of course would require a large amount of work, but may be useful for "
"the future."
msgstr ""
